<% content_for :title, "Peminjaman Add" %>
<h1 class="page-header mb-3">Tambah Peminjaman</h1>
<div class="row">
  <div class="col-xl-12">
    <div class="card">
      <div class="card-body">
        <%= render partial: "shared/alertmainpage" %>
        <br />
        <%= form_with model: @borrower, url: admin_borrower_store_path, method:
        :post, multipart: true do |form| %>
        <div class="form-group">
          <% invalid = @borrower.errors.include?(:book_id) %>
          <label for="inputEmail4">Buku</label>
          <%= form.select :book_id,options_for_select(@books. insert(0, ["Pilih
          Buku",""])),{}, class:"form-control #{if invalid then "is-invalid"
          else "" end }", placeholder:"Pilih Buku" %> <% if invalid %>
          <div class="invalid-feedback d-block">
            <% @borrower.errors.full_messages_for(:book_id).each do
            |error_message| %> <%= error_message %>. <br />
            <% end %>
          </div>
          <% end %>
        </div>
        <div class="form-group">
          <% invalid = @borrower.errors.include?(:member_id) %>
          <label for="inputEmail4">Member</label>
          <%= form.select :member_id,options_for_select(@members. insert(0,
          ["Pilih Member",""])),{}, class:"form-control #{if invalid then
          "is-invalid" else "" end }", placeholder:"Pilih Member" %> <% if invalid
          %>
          <div class="invalid-feedback d-block">
            <% @borrower.errors.full_messages_for(:member_id).each do
            |error_message| %> <%= error_message %>. <br />
            <% end %>
          </div>
          <% end %>
        </div>
        <hr />
        <div class="text-end">
          <a href="<%= admin_borrower_index_path %>" class="btn btn-danger">
            Batal
          </a>
          <%= form.submit "Simpan", class:"btn btn-primary" %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<!-- END row -->

<% content_for :javascript do %>
<script>
  $(document).ready(function () {
    $("#borrower_book_id").select2({
      placeholder: "Pilih Buku",
      allowClear: true,
    });
    $("#borrower_member_id").select2({
      placeholder: "Pilih Member",
      allowClear: true,
    });
  });
</script>
<% end %>
